<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>io0SaY çš„è¿åŠ¨è¶³è¿¹</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary-color: #374151;
            --secondary-color: #4b5563;
            --accent-color: #6b7280;
            --background-color: #f3f4f6;
            --card-background: #ffffff;
            --text-primary: #1f2937;
            --text-secondary: #4b5563;
            --text-muted: #6b7280;
            --border-color: #e5e7eb;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 10px 10px -5px rgb(0 0 0 / 0.04);
            --radius-sm: 0.25rem;
            --radius-md: 0.375rem;
            --radius-lg: 0.5rem;
            --radius-xl: 0.75rem;
            --radius-2xl: 1rem;
            --radius-3xl: 1.5rem;
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --spacing-2xl: 3rem;
            --transition-fast: 0.15s ease-in-out;
            --transition-normal: 0.3s ease-in-out;
            --transition-slow: 0.5s ease-in-out;
        }
        
        body {
            font-family: 'SF Pro Display', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: var(--background-color);
            color: var(--text-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--spacing-xl) var(--spacing-md);
        }
        
        /* å¤´éƒ¨åŒºåŸŸ */
        header {
            text-align: center;
            margin-bottom: var(--spacing-2xl);
            padding: var(--spacing-2xl) var(--spacing-xl);
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 40%, #06b6d4 70%, #14b8a6 100%);
            border-radius: var(--radius-3xl);
            color: white;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 100px rgba(6, 182, 212, 0.15);
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        header:hover {
            transform: translateY(-8px);
            box-shadow: 0 30px 60px -15px rgba(0, 0, 0, 0.3), 0 0 150px rgba(6, 182, 212, 0.25);
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.15) 0%, transparent 50%),
                        radial-gradient(circle at 75% 75%, rgba(255, 255, 255, 0.08) 0%, transparent 50%),
                        radial-gradient(circle at 50% 120%, rgba(6, 182, 212, 0.2) 0%, transparent 70%);
            z-index: 0;
        }
        
        header::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%);
            animation: shimmer 12s ease-in-out infinite;
            z-index: 0;
        }
        
        @keyframes shimmer {
            0%, 100% { transform: translateX(-100%) translateY(-100%) rotate(0deg); }
            50% { transform: translateX(100%) translateY(100%) rotate(180deg); }
            100% { transform: translateX(-100%) translateY(-100%) rotate(360deg); }
        }
        
        header .header-content {
            position: relative;
            z-index: 1;
        }
        
        header h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: var(--spacing-lg);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
            letter-spacing: 0.02em;
            color: #ffffff;
            display: inline-block;
            animation: fadeInDown 0.8s ease forwards;
            position: relative;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #ffffff 0%, rgba(255, 255, 255, 0.8) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            padding: 0 var(--spacing-md);
        }
        
        header h1::after {
            content: '';
            position: absolute;
            bottom: -6px;
            left: 15%;
            width: 70%;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            border-radius: 9999px;
            animation: subtlePulse 4s ease-in-out infinite;
        }
        
        @keyframes subtlePulse {
            0%, 100% { opacity: 0.3; transform: scaleX(0.9); }
            50% { opacity: 0.8; transform: scaleX(1); }
        }
        
        header p {
            font-size: 1.375rem;
            opacity: 0.95;
            max-width: 700px;
            margin: 0 auto;
            font-weight: 400;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            animation: fadeInUp 0.8s ease 0.2s forwards;
            opacity: 0;
            position: relative;
            line-height: 1.6;
            padding: 0 var(--spacing-xl);
        }
        
        /* è£…é¥°æ€§å‡ ä½•å…ƒç´  */
        header .decorative-element {
            position: absolute;
            z-index: 0;
        }
        
        header .decorative-element:nth-child(1) {
            top: 15%;
            left: 15%;
            width: 60px;
            height: 60px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 50%;
            animation: gentleFloat 8s ease-in-out infinite;
        }
        
        header .decorative-element:nth-child(2) {
            bottom: 20%;
            right: 15%;
            width: 40px;
            height: 40px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 50%;
            animation: gentleFloat 10s ease-in-out infinite reverse;
        }
        
        header .decorative-element:nth-child(3) {
            top: 35%;
            right: 10%;
            width: 30px;
            height: 30px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 50%;
            animation: gentleFloat 9s ease-in-out infinite;
        }
        
        @keyframes gentleFloat {
            0%, 100% { transform: translateY(0px) translateX(0px) rotate(0deg); opacity: 0.2; }
            25% { transform: translateY(-8px) translateX(4px) rotate(90deg); opacity: 0.4; }
            50% { transform: translateY(-4px) translateX(-4px) rotate(180deg); opacity: 0.3; }
            75% { transform: translateY(8px) translateX(-2px) rotate(270deg); opacity: 0.5; }
            100% { transform: translateY(0px) translateX(0px) rotate(360deg); opacity: 0.2; }
        }
        
        @keyframes sparkle {
            0%, 100% { transform: translateY(-50%) scale(0.8); opacity: 0.5; }
            50% { transform: translateY(-50%) scale(1.2); opacity: 1; }
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* ç­›é€‰åŠŸèƒ½æ ·å¼ */
        .filter-section {
            margin-bottom: var(--spacing-xl);
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--radius-2xl);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-lg);
            border: 1px solid rgba(226, 232, 240, 0.5);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .filter-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), var(--accent-color));
        }
        
        .filter-buttons {
            display: flex;
            gap: var(--spacing-md);
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: var(--spacing-md);
        }
        
        .year-filter-container {
            padding-top: var(--spacing-md);
            border-top: 1px solid rgba(226, 232, 240, 0.5);
        }
        
        .year-filter-wrapper {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            width: 100%;
        }
        
        .year-filter-all {
            flex-shrink: 0;
        }
        
        .year-filter-scroll {
            display: flex;
            gap: var(--spacing-md);
            overflow-x: auto;
            padding: var(--spacing-sm) 0;
            flex-grow: 1;
            scrollbar-width: thin;
            scrollbar-color: rgba(148, 163, 184, 0.3) rgba(226, 232, 240, 0.2);
        }
        
        .year-filter-scroll::-webkit-scrollbar {
            height: 6px;
        }
        
        .year-filter-scroll::-webkit-scrollbar-track {
            background: rgba(226, 232, 240, 0.2);
            border-radius: 9999px;
        }
        
        .year-filter-scroll::-webkit-scrollbar-thumb {
            background: rgba(148, 163, 184, 0.3);
            border-radius: 9999px;
        }
        
        .year-filter-scroll::-webkit-scrollbar-thumb:hover {
            background: rgba(148, 163, 184, 0.5);
        }
        
        .year-filter-buttons {
            display: flex;
            gap: var(--spacing-md);
            overflow-x: auto;
            padding: var(--spacing-sm) 0;
            scrollbar-width: thin;
            scrollbar-color: rgba(148, 163, 184, 0.3) rgba(226, 232, 240, 0.2);
        }
        
        .year-filter-buttons::-webkit-scrollbar {
            height: 6px;
        }
        
        .year-filter-buttons::-webkit-scrollbar-track {
            background: rgba(226, 232, 240, 0.2);
            border-radius: 9999px;
        }
        
        .year-filter-buttons::-webkit-scrollbar-thumb {
            background: rgba(148, 163, 184, 0.3);
            border-radius: 9999px;
        }
        
        .year-filter-buttons::-webkit-scrollbar-thumb:hover {
            background: rgba(148, 163, 184, 0.5);
        }
        
        .filter-btn {
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(99, 102, 241, 0.2);
            border-radius: 9999px;
            padding: var(--spacing-sm) var(--spacing-lg);
            font-size: 0.875rem;
            font-weight: 600;
            color: #3b82f6;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.03);
            min-width: 80px;
        }
        
        .filter-btn::before {
            font-size: 1rem;
            transition: transform 0.4s ease;
        }
        
        .filter-btn:hover::before {
            transform: scale(1.2) rotate(10deg);
        }
        
        .filter-btn[data-filter="all"]::before {
            content: "ğŸ†";
        }
        
        .filter-btn[data-filter="marathon"]::before {
            content: "ğŸƒ";
        }
        
        .filter-btn[data-filter="halfmarathon"]::before {
            content: "ğŸƒâ€â™€ï¸";
        }
        
        .filter-btn[data-filter="trail"]::before {
            content: "ğŸŒ²";
        }
        
        .filter-btn[data-filter="hiking"]::before {
            content: "â›°ï¸";
        }
        
        .filter-btn[data-filter="stairs"]::before {
            content: "ğŸ™ï¸";
        }
        
        .filter-btn:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 10px 15px -3px rgba(99, 102, 241, 0.15), 0 4px 6px -4px rgba(99, 102, 241, 0.1);
        }
        
        /* ä¸åŒç±»å‹ç­›é€‰æŒ‰é’®çš„æ‚¬åœæ•ˆæœ */
        .filter-btn[data-filter="all"]:hover {
            border-color: rgba(99, 102, 241, 0.4);
        }
        
        .filter-btn[data-filter="marathon"]:hover {
            border-color: rgba(59, 130, 246, 0.4);
        }
        
        .filter-btn[data-filter="halfmarathon"]:hover {
            border-color: rgba(139, 92, 246, 0.4);
        }
        
        .filter-btn[data-filter="trail"]:hover {
            border-color: rgba(245, 158, 11, 0.4);
        }
        
        .filter-btn[data-filter="hiking"]:hover {
            border-color: rgba(16, 185, 129, 0.4);
        }
        
        .filter-btn[data-filter="stairs"]:hover {
            border-color: rgba(236, 72, 153, 0.4);
        }
        
        /* ä¸åŒç±»å‹ç­›é€‰æŒ‰é’®çš„æ¿€æ´»çŠ¶æ€ */
        .filter-btn.active {
            color: white;
            border-color: currentColor;
            box-shadow: 0 8px 16px -6px rgba(0, 0, 0, 0.2), 0 4px 8px -4px rgba(0, 0, 0, 0.1);
            transform: translateY(-3px) scale(1.01);
            z-index: 10;
        }
        
        /* ç±»å‹ç­›é€‰æŒ‰é’®æ¿€æ´»çŠ¶æ€ */
        .filter-btn[data-filter="all"].active {
            background: linear-gradient(135deg, rgba(8, 145, 178, 0.9), rgba(6, 182, 212, 0.9));
        }
        
        .filter-btn[data-filter="marathon"].active {
            background: linear-gradient(135deg, rgba(147, 197, 253, 0.9), rgba(59, 130, 246, 0.9));
        }
        
        .filter-btn[data-filter="halfmarathon"].active {
            background: linear-gradient(135deg, rgba(196, 181, 253, 0.9), rgba(139, 92, 246, 0.9));
        }
        
        .filter-btn[data-filter="trail"].active {
            background: linear-gradient(135deg, rgba(252, 211, 77, 0.9), rgba(245, 158, 11, 0.9));
        }
        
        .filter-btn[data-filter="hiking"].active {
            background: linear-gradient(135deg, rgba(110, 231, 183, 0.9), rgba(16, 185, 129, 0.9));
        }
        
        .filter-btn[data-filter="stairs"].active {
            background: linear-gradient(135deg, rgba(251, 113, 133, 0.9), rgba(236, 72, 153, 0.9));
        }
        
        /* å¹´ä»½ç­›é€‰æŒ‰é’®æ¿€æ´»çŠ¶æ€ */
        .filter-btn[data-year="all"].active {
            background: linear-gradient(135deg, rgba(8, 145, 178, 0.9), rgba(6, 182, 212, 0.9));
        }
        
        .filter-btn[data-year].active {
            background: linear-gradient(135deg, rgba(147, 197, 253, 0.9), rgba(59, 130, 246, 0.9));
        }
        
        .filter-btn.active::before {
            transform: scale(1.2) rotate(10deg);
        }
        
        .filter-btn::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.2) 50%, transparent 70%);
            transform: rotate(0deg);
            transition: transform 0.6s ease;
            opacity: 0;
        }
        
        .filter-btn:hover::after {
            transform: rotate(360deg);
            opacity: 1;
        }
        
        .filter-btn.active::after {
            transform: rotate(360deg);
            opacity: 1;
        }
        

        
        /* é¡¶éƒ¨ç»Ÿè®¡ */
        .stats-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--radius-2xl);
            padding: var(--spacing-2xl);
            box-shadow: var(--shadow-md);
            margin-bottom: var(--spacing-2xl);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .stats-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #3b82f6, #10b981, #f59e0b);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: var(--spacing-lg);
            margin-top: var(--spacing-md);
        }
        
        .stat-item {
            text-align: center;
            padding: var(--spacing-lg);
            background: rgba(255, 255, 255, 0.8);
            border-radius: var(--radius-xl);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid rgba(226, 232, 240, 0.5);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
        }
        
        .stat-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, #3b82f6, #60a5fa);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.4s ease;
        }
        
        .stat-item:hover {
            transform: translateY(-6px) scale(1.02);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            border-color: rgba(59, 130, 246, 0.3);
        }
        
        .stat-item:hover::before {
            transform: scaleX(1);
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: 800;
            color: #1e3a8a;
            margin-bottom: var(--spacing-sm);
            line-height: 1;
            transition: all 0.4s ease;
            background: linear-gradient(135deg, #3b82f6, #60a5fa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: inline-block;
        }
        
        .stat-item:hover .stat-value {
            transform: scale(1.1);
        }
        
        .stat-label {
            font-size: 0.875rem;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 600;
            transition: all 0.4s ease;
        }
        
        .stat-item:hover .stat-label {
            color: #3b82f6;
        }
        
        /* æ¯”èµ›éƒ¨åˆ† */
        .race-section {
            margin-bottom: var(--spacing-2xl);
        }
        
        .race-section h2 {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: var(--spacing-xl);
            color: #1e3a8a;
            position: relative;
            padding-bottom: var(--spacing-md);
            letter-spacing: -0.025em;
            background: linear-gradient(135deg, #3b82f6, #60a5fa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: inline-block;
        }
        
        .race-section h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, #3b82f6, #10b981);
            border-radius: 9999px;
        }
        
        .race-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: var(--spacing-md);
            align-items: start;
        }
        
        /* æ¯”èµ›å¡ç‰‡ */
        .race-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: var(--radius-xl);
            padding: var(--spacing-md);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(226, 232, 240, 0.5);
            overflow: hidden;
            position: relative;
            backdrop-filter: blur(5px);
            min-height: 400px;
            height: 100%;
        }
        
        .race-card-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }
        
        .race-info {
            flex-grow: 1;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
        }
        
        .race-card-content .race-info {
            flex-grow: 1;
        }
        
        .race-card .completed-time,
        .race-card .countdown {
            margin-top: auto;
        }
        
        .race-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.4s ease;
        }
        
        /* ä¸åŒç±»å‹å¡ç‰‡çš„é¢œè‰²åŒºåˆ† */
        .race-card[data-type="marathon"]::before {
            background: linear-gradient(90deg, #93c5fd, #3b82f6);
        }
        
        .race-card[data-type="halfmarathon"]::before {
            background: linear-gradient(90deg, #c4b5fd, #8b5cf6);
        }
        
        .race-card[data-type="trail"]::before {
            background: linear-gradient(90deg, #fcd34d, #f59e0b);
        }
        
        .race-card[data-type="hiking"]::before {
            background: linear-gradient(90deg, #6ee7b7, #10b981);
        }
        
        .race-card[data-type="stairs"]::before {
            background: linear-gradient(90deg, #f472b6, #ec4899);
        }
        
        .race-card[data-type="other"]::before {
            background: linear-gradient(90deg, #cbd5e1, #64748b);
        }
        
        .race-card:hover {
            transform: translateY(-6px) scale(1.02);
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 10px 10px -5px rgb(0 0 0 / 0.04);
            border-color: rgba(79, 70, 229, 0.3);
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%);
        }
        
        .race-card:hover::before {
            transform: scaleX(1);
        }
        
        .race-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--spacing-md);
        }
        
        .race-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
            line-height: 1.2;
            letter-spacing: -0.01em;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'SF Pro Display', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .race-card:hover .race-title {
            color: var(--secondary-color);
        }
        
        .race-date {
            font-size: 0.75rem;
            color: var(--text-muted);
            font-weight: 500;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .race-card:hover .race-date {
            color: var(--secondary-color);
        }
        
        .race-feeling {
            background: linear-gradient(135deg, rgba(79, 70, 229, 0.08) 0%, rgba(99, 102, 241, 0.04) 100%);
            border-left: 3px solid var(--secondary-color);
            padding: var(--spacing-xs) var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
            font-size: 0.75rem;
            color: var(--text-secondary);
            line-height: 1.4;
            font-weight: 400;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .race-card:hover .race-feeling {
            background: linear-gradient(135deg, rgba(79, 70, 229, 0.12) 0%, rgba(99, 102, 241, 0.08) 100%);
        }
        
        .race-info {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
            flex-grow: 1;
        }
        
        .race-info-item {
            display: flex;
            flex-direction: column;
        }
        
        .race-info-label {
            font-size: 0.625rem;
            color: var(--text-muted);
            margin-bottom: 2px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .race-card:hover .race-info-label {
            color: var(--secondary-color);
        }
        
        .race-info-value {
            font-size: 0.875rem;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1.2;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .race-card:hover .race-info-value {
            color: var(--secondary-color);
        }
        
        /* è®­ç»ƒè¿›åº¦ */
        .race-progress {
            margin: var(--spacing-sm) 0;
        }
        
        .race-progress-label {
            font-size: 0.625rem;
            color: var(--text-muted);
            margin-bottom: 4px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 600;
        }
        
        .race-progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(226, 232, 240, 0.5);
            border-radius: 9999px;
            overflow: hidden;
            margin-bottom: 4px;
        }
        
        .race-progress-fill {
            height: 100%;
            border-radius: 9999px;
            transition: width 0.3s ease;
        }
        
        /* ä¸åŒç±»å‹å¡ç‰‡çš„è¿›åº¦æ¡é¢œè‰² */
        .race-card[data-type="marathon"] .race-progress-fill {
            background: linear-gradient(90deg, #60a5fa, #3b82f6);
        }
        
        .race-card[data-type="halfmarathon"] .race-progress-fill {
            background: linear-gradient(90deg, #c4b5fd, #8b5cf6);
        }
        
        .race-card[data-type="trail"] .race-progress-fill {
            background: linear-gradient(90deg, #fcd34d, #f59e0b);
        }
        
        .race-card[data-type="hiking"] .race-progress-fill {
            background: linear-gradient(90deg, #6ee7b7, #10b981);
        }
        
        .race-card[data-type="stairs"] .race-progress-fill {
            background: linear-gradient(90deg, #f472b6, #ec4899);
        }
        
        .race-progress-text {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-secondary);
            text-align: right;
        }
        
        /* çŠ¶æ€ä¿¡æ¯ */
        .race-status {
            display: flex;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
        }
        
        .race-status-item {
            flex: 1;
            background: rgba(241, 245, 249, 0.8);
            padding: var(--spacing-xs);
            border-radius: var(--radius-sm);
            font-size: 0.625rem;
            text-align: center;
        }
        
        .race-status-label {
            display: block;
            color: var(--text-muted);
            margin-bottom: 2px;
            font-weight: 500;
        }
        
        .race-status-value {
            display: block;
            color: var(--text-secondary);
            font-weight: 600;
        }
        
        .completed-time {
            color: white;
            padding: var(--spacing-sm);
            border-radius: var(--radius-lg);
            margin-top: auto;
            text-align: center;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 40px;
        }
        
        .completed-time-value {
            font-size: 0.875rem;
            font-weight: 700;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }
        
        /* å€’è®¡æ—¶ */
        .countdown {
            color: white;
            padding: var(--spacing-sm);
            border-radius: var(--radius-lg);
            margin-top: auto;
            text-align: center;
            font-size: 0.75rem;
            font-weight: 600;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 40px;
        }
        
        /* å³å°†å¼€å§‹å’Œå·²ç»“æŸéƒ¨åˆ†çš„é¢œè‰²åŒºåˆ† */
        .upcoming-section h2 {
            color: #3b82f6;
            border-bottom: 3px solid #3b82f6;
        }
        
        .completed-section h2 {
            color: #10b981;
            border-bottom: 3px solid #10b981;
        }
        
        /* ä¸åŒç±»å‹å¡ç‰‡çš„è®¡æ—¶é¢œè‰²åŒºåˆ† */
        .race-card[data-type="marathon"] .completed-time,
        .race-card[data-type="marathon"] .countdown {
            background: linear-gradient(135deg, #93c5fd, #3b82f6);
        }
        
        .race-card[data-type="halfmarathon"] .completed-time,
        .race-card[data-type="halfmarathon"] .countdown {
            background: linear-gradient(135deg, #c4b5fd, #8b5cf6);
        }
        
        .race-card[data-type="trail"] .completed-time,
        .race-card[data-type="trail"] .countdown {
            background: linear-gradient(135deg, #fcd34d, #f59e0b);
        }
        
        .race-card[data-type="hiking"] .completed-time,
        .race-card[data-type="hiking"] .countdown {
            background: linear-gradient(135deg, #6ee7b7, #10b981);
        }
        
        .race-card[data-type="stairs"] .completed-time,
        .race-card[data-type="stairs"] .countdown {
            background: linear-gradient(135deg, #f472b6, #ec4899);
        }
        
        .race-card[data-type="other"] .completed-time,
        .race-card[data-type="other"] .countdown {
            background: linear-gradient(135deg, #cbd5e1, #64748b);
        }
        
        .countdown:hover {
            transform: scale(1.05);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .countdown-time {
            font-size: 0.875rem;
            font-weight: 800;
            margin-top: 2px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }
        
        /* çŠ¶æ€å¾½ç«  */
        .status-badge {
            display: inline-block;
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            transition: all 0.4s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
        }
        
        .status-completed {
    background: linear-gradient(135deg, #059669 0%, #10b981 100%);
    color: white;
}

.status-dnf {
    background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
    color: white;
}

.status-dnf:hover {
    transform: scale(1.05);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
}
        
        .status-completed:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
        }
        
        .status-starting {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
        }
        
        .status-starting:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
        }
        
        /* é¡µè„š */
        footer {
            text-align: center;
            margin-top: var(--spacing-2xl);
            padding: var(--spacing-xl) 0;
            color: var(--text-muted);
            font-size: 0.875rem;
            border-top: 1px solid var(--border-color);
            background: var(--card-background);
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
            backdrop-filter: blur(10px);
        }
        
        footer p {
            font-weight: 400;
            letter-spacing: 0.025em;
        }
        
        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .race-card {
            animation: fadeInUp 0.5s ease forwards;
        }
        
        .race-card:nth-child(1) { animation-delay: 0.1s; }
        .race-card:nth-child(2) { animation-delay: 0.2s; }
        .race-card:nth-child(3) { animation-delay: 0.3s; }
        .race-card:nth-child(4) { animation-delay: 0.4s; }
        .race-card:nth-child(5) { animation-delay: 0.5s; }
        .race-card:nth-child(6) { animation-delay: 0.6s; }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .container {
                padding: var(--spacing-lg) var(--spacing-md);
            }
            
            header {
                padding: var(--spacing-xl) var(--spacing-lg);
            }
            
            header h1 {
                font-size: 2.25rem;
            }
            
            header p {
                font-size: 1.125rem;
            }
            
            .race-grid {
                grid-template-columns: 1fr;
                gap: var(--spacing-sm);
            }
            
            .race-card {
                padding: var(--spacing-sm);
            }
            
            .race-title {
                font-size: 1rem;
            }
            
            .race-date {
                font-size: 0.7rem;
            }
            
            .race-feeling {
                font-size: 0.7rem;
                padding: 4px 8px;
            }
            
            .race-info {
                gap: var(--spacing-xs);
            }
            
            .race-info-value {
                font-size: 0.8rem;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: var(--spacing-md);
            }
            
            .filter-buttons {
                gap: var(--spacing-xs);
                justify-content: flex-start;
                overflow-x: auto;
                padding-bottom: var(--spacing-sm);
            }
            
            .filter-btn {
                padding: var(--spacing-xs) var(--spacing-md);
                font-size: 0.8rem;
                white-space: nowrap;
            }
            
            .race-section h2 {
            font-size: 1.5rem;
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-sm);
            font-weight: 600;
            display: inline-block;
        }
        
        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .filter-buttons {
                justify-content: flex-start;
            }
            
            header h1 {
                font-size: 1.875rem;
            }
            
            .race-section h2 {
                font-size: 1.5rem;
            }
            
            .race-card {
                padding: var(--spacing-md);
            }
        }
        
        /* åœ°å›¾å®¹å™¨æ ·å¼ */
        .map-section {
            margin-bottom: var(--spacing-2xl);
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--radius-2xl);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-lg);
            border: 1px solid rgba(226, 232, 240, 0.5);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .map-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #3b82f6, #10b981, #f59e0b);
        }
        
        .map-section h2 {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: var(--spacing-xl);
            color: #1e3a8a;
            position: relative;
            padding-bottom: var(--spacing-md);
            letter-spacing: -0.025em;
            background: linear-gradient(135deg, #3b82f6, #60a5fa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: inline-block;
        }
        
        .map-section h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, #3b82f6, #10b981);
            border-radius: 9999px;
        }
        
        #map {
            height: 600px !important;
            width: 100% !important;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-md);
            z-index: 1;
            min-height: 600px;
            background-color: #f0f0f0;
        }
        
        /* åœ°å›¾å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            #map {
                height: 400px !important;
                min-height: 400px;
            }
            
            .map-section h2 {
                font-size: 1.5rem;
            }
        }
        
        @media (max-width: 480px) {
            #map {
                height: 300px !important;
                min-height: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <!-- è£…é¥°æ€§å‡ ä½•å…ƒç´  -->
            <div class="decorative-element"></div>
            <div class="decorative-element"></div>
            <div class="decorative-element"></div>
            
            <div class="header-content">
                <h1>io0SaY çš„è¿åŠ¨è¶³è¿¹</h1>
                <p>è®°å½•ä¸ªäººå¥”è·‘çš„æ±—æ°´ï¼Œåˆ†äº«äº²å­è¿åŠ¨çš„æ¬¢ç¬‘ã€‚æ¯ä¸€æ­¥éƒ½æ˜¯æˆé•¿ï¼Œæ¯ä¸€åˆ»éƒ½æ˜¯å›å¿†ã€‚</p>
            </div>
        </header>
        
        <!-- ç­›é€‰åŠŸèƒ½ -->
        <div class="filter-section">
            <!-- ç±»å‹ç­›é€‰ -->
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">å…¨éƒ¨</button>
                <button class="filter-btn" data-filter="marathon">é©¬æ‹‰æ¾</button>
                <button class="filter-btn" data-filter="halfmarathon">åŠç¨‹é©¬æ‹‰æ¾</button>
                <button class="filter-btn" data-filter="trail">è¶Šé‡</button>
                <button class="filter-btn" data-filter="hiking">å¾’æ­¥</button>
                <button class="filter-btn" data-filter="stairs">ç™»æ¥¼</button>
            </div>
            
            <!-- å¹´ä»½ç­›é€‰ -->
            <div class="year-filter-container">
                <div class="year-filter-wrapper">
                    <!-- å›ºå®šçš„"å…¨éƒ¨å¹´ä»½"æŒ‰é’® -->
                    <div class="year-filter-all">
                        <button class="filter-btn active" data-year="all">å…¨éƒ¨å¹´ä»½</button>
                    </div>
                    
                    <!-- å¯æ»šåŠ¨çš„å¹´ä»½æŒ‰é’® -->
                    <div class="year-filter-scroll">
                        <button class="filter-btn" data-year="2028">2028</button>
                        <button class="filter-btn" data-year="2027">2027</button>
                        <button class="filter-btn" data-year="2026">2026</button>
                        <button class="filter-btn" data-year="2025">2025</button>
                        <button class="filter-btn" data-year="2024">2024</button>
                        <button class="filter-btn" data-year="2023">2023</button>
                        <button class="filter-btn" data-year="2022">2022</button>
                        <button class="filter-btn" data-year="2021">2021</button>
                        <button class="filter-btn" data-year="2020">2020</button>
                        <button class="filter-btn" data-year="2019">2019</button>
                        <button class="filter-btn" data-year="2018">2018</button>
                        <button class="filter-btn" data-year="2017">2017</button>
                        <button class="filter-btn" data-year="2016">2016</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- é¡¶éƒ¨ç»Ÿè®¡ -->
        <div class="stats-section">
            <div class="stats-grid">
                <!-- ç»Ÿè®¡æ•°æ® -->
                <div class="stat-item" data-stat="total">
                    <div class="stat-value">0</div>
                    <div class="stat-label">Total Activities</div>
                </div>
                <div class="stat-item" data-stat="marathon">
                    <div class="stat-value">0</div>
                    <div class="stat-label">Marathon Events</div>
                </div>
                <div class="stat-item" data-stat="halfmarathon">
                    <div class="stat-value">0</div>
                    <div class="stat-label">Half Marathon Events</div>
                </div>
                <div class="stat-item" data-stat="best-marathon">
                    <div class="stat-value">N/A</div>
                    <div class="stat-label">Best Marathon</div>
                </div>
                <div class="stat-item" data-stat="best-halfmarathon">
                    <div class="stat-value">N/A</div>
                    <div class="stat-label">Best Half Marathon</div>
                </div>
                <div class="stat-item" data-stat="trail">
                    <div class="stat-value">0</div>
                    <div class="stat-label">Trail Events</div>
                </div>
                <div class="stat-item" data-stat="hiking">
                    <div class="stat-value">0</div>
                    <div class="stat-label">Hiking Trips</div>
                </div>
                <div class="stat-item" data-stat="elevation">
                    <div class="stat-value">0+</div>
                    <div class="stat-label">Elevation Gain</div>
                </div>
                <div class="stat-item" data-stat="100km">
                    <div class="stat-value">0</div>
                    <div class="stat-label">100KM+ Events</div>
                </div>
                <div class="stat-item" data-stat="dnf">
                    <div class="stat-value">0</div>
                    <div class="stat-label">DNF</div>
                </div>
            </div>
        </div>
        
        <!-- è¿åŠ¨è¶³è¿¹åœ°å›¾ -->
        <div class="map-section">
            <h2>è¿åŠ¨è¶³è¿¹åœ°å›¾</h2>
            <div id="map" style="height: 600px; width: 100%; border-radius: var(--radius-xl); box-shadow: var(--shadow-md); z-index: 1; min-height: 600px; background-color: #f0f0f0;"></div>
        </div>
        
        <!-- å³å°†å¼€å§‹çš„æ´»åŠ¨ -->
        <div class="race-section upcoming-section">
            <h2>å¾…å¼€å§‹</h2>
            
            <div class="race-grid">
            <!-- ç¡¬ç¼–ç çš„æ´»åŠ¨ä¿¡æ¯ -->
            <div class="race-card" data-type="marathon">
                <div class="race-card-content">
                    <div class="race-header">
                        <div>
                            <div class="race-title">2026 æ— é”¡é©¬æ‹‰æ¾</div>
                            <div class="race-date">2026å¹´3æœˆ22æ—¥</div>
                        </div>
                    </div>
                    <div class="race-feeling">
                        <div class="race-feeling-content">ä¸­å›½æœ€ç¾é©¬æ‹‰æ¾èµ›é“ä¹‹ä¸€ï¼Œæ²¿é€”æ¬£èµå¤ªæ¹–é£å…‰å’Œæ¨±èŠ±ç››æ™¯ã€‚å‚èµ›ç›®æ ‡ï¼šçªç ´3å°æ—¶30åˆ†ï¼Œåˆ›é€ ä¸ªäººæœ€ä½³æˆç»©</div>
                    </div>
                    <div class="race-info">
                        <div class="race-info-item">
                            <div class="race-info-label">Distance</div>
                            <div class="race-info-value">42.195km</div>
                        </div>
                        <div class="race-info-item">
                            <div class="race-info-label">Location</div>
                            <div class="race-info-value">ä¸­å›½ æ±Ÿè‹ æ— é”¡</div>
                        </div>
                    </div>
                    <div class="race-progress">
                        <div class="race-progress-label">è®­ç»ƒè¿›åº¦</div>
                        <div class="race-progress-bar">
                            <div class="race-progress-fill" style="width: 60%"></div>
                        </div>
                        <div class="race-progress-text">60%</div>
                    </div>
                    <div class="race-status">
                        <div class="race-status-item">
                            <span class="race-status-label">è£…å¤‡</span>
                            <span class="race-status-value">å·²å‡†å¤‡</span>
                        </div>
                        <div class="race-status-item">
                            <span class="race-status-label">é¥®é£Ÿ</span>
                            <span class="race-status-value">è®¡åˆ’ä¸­</span>
                        </div>
                    </div>
                </div>
                <div class="countdown">
                    <div class="countdown-time" id="wuxi-countdown">38å¤© 07æ—¶ 30åˆ† 00ç§’</div>
                </div>
            </div>
            
            <div class="race-card" data-type="marathon">
                <div class="race-card-content">
                    <div class="race-header">
                        <div>
                            <div class="race-title">2026 æ·®å®‰é©¬æ‹‰æ¾</div>
                            <div class="race-date">2026å¹´4æœˆ12æ—¥</div>
                        </div>
                    </div>
                    <div class="race-feeling">
                        <div class="race-feeling-content">å†å²æ–‡åŒ–ååŸèµ›é“ï¼Œæ„Ÿå—æ·®å®‰çš„è¿æ²³æ–‡åŒ–å’Œæ·®æ‰¬ç¾é£Ÿã€‚å‚èµ›ç›®æ ‡ï¼šç¨³å®šå‘æŒ¥ï¼Œäº‰å–3å°æ—¶35åˆ†å®Œèµ›</div>
                    </div>
                    <div class="race-info">
                        <div class="race-info-item">
                            <div class="race-info-label">Distance</div>
                            <div class="race-info-value">42.195km</div>
                        </div>
                        <div class="race-info-item">
                            <div class="race-info-label">Location</div>
                            <div class="race-info-value">ä¸­å›½ æ±Ÿè‹ æ·®å®‰</div>
                        </div>
                    </div>
                    <div class="race-progress">
                        <div class="race-progress-label">è®­ç»ƒè¿›åº¦</div>
                        <div class="race-progress-bar">
                            <div class="race-progress-fill" style="width: 45%"></div>
                        </div>
                        <div class="race-progress-text">45%</div>
                    </div>
                    <div class="race-status">
                        <div class="race-status-item">
                            <span class="race-status-label">è£…å¤‡</span>
                            <span class="race-status-value">å‡†å¤‡ä¸­</span>
                        </div>
                        <div class="race-status-item">
                            <span class="race-status-label">é¥®é£Ÿ</span>
                            <span class="race-status-value">æœªå¼€å§‹</span>
                        </div>
                    </div>
                </div>
                <div class="countdown">
                    <div class="countdown-time" id="huaian-countdown">59å¤© 07æ—¶ 30åˆ† 00ç§’</div>
                </div>
            </div>
            
            <div class="race-card" data-type="trail">
                <div class="race-card-content">
                    <div class="race-header">
                        <div>
                            <div class="race-title">2026 é˜³æ˜¥é¸¡ç¬¼é¡¶è¶Šé‡èµ›</div>
                            <div class="race-date">2026å¹´4æœˆ26æ—¥</div>
                        </div>
                    </div>
                    <div class="race-feeling">
                        <div class="race-feeling-content">å¹¿ä¸œè‘—åè¶Šé‡èµ›é“ï¼Œç©¿è¶Šé¸¡ç¬¼é¡¶å±±è„‰ï¼Œæ¬£èµé«˜å±±è‰ç”¸å’Œäº‘æµ·æ™¯è§‚ã€‚å‚èµ›ç›®æ ‡ï¼šå®‰å…¨å®Œèµ›ï¼Œäº«å—è¶Šé‡ä¹è¶£ï¼Œäº‰å–4.5å°æ—¶å†…å®Œæˆ</div>
                    </div>
                    <div class="race-info">
                        <div class="race-info-item">
                            <div class="race-info-label">Distance</div>
                            <div class="race-info-value">30km</div>
                        </div>
                        <div class="race-info-item">
                            <div class="race-info-label">Location</div>
                            <div class="race-info-value">ä¸­å›½ å¹¿ä¸œ é˜³æ˜¥</div>
                        </div>
                    </div>
                    <div class="race-progress">
                        <div class="race-progress-label">è®­ç»ƒè¿›åº¦</div>
                        <div class="race-progress-bar">
                            <div class="race-progress-fill" style="width: 30%"></div>
                        </div>
                        <div class="race-progress-text">30%</div>
                    </div>
                    <div class="race-status">
                        <div class="race-status-item">
                            <span class="race-status-label">è£…å¤‡</span>
                            <span class="race-status-value">æœªå¼€å§‹</span>
                        </div>
                        <div class="race-status-item">
                            <span class="race-status-label">è·¯çº¿</span>
                            <span class="race-status-value">ç ”ç©¶ä¸­</span>
                        </div>
                    </div>
                </div>
                <div class="countdown">
                    <div class="countdown-time" id="yangchun-countdown">73å¤© 07æ—¶ 30åˆ† 00ç§’</div>
                </div>
            </div>
            </div>
        </div>
        
        <!-- å·²ç»“æŸçš„æ´»åŠ¨ -->
        <div class="race-section completed-section">
            <h2>å·²ç»“æŸ</h2>
            
            <div class="race-grid">
            {{ $allRaces := where .Site.RegularPages "Type" "!=" "posts" | uniq }}
            
            <!-- æ˜¾ç¤ºæ—¥æœŸåœ¨2026-01-01ä¹‹åçš„æ´»åŠ¨ -->
            {{ $afterMeishajian := where $allRaces "Date" "ge" (time "2026-01-01") }}
            {{ if $afterMeishajian }}
                {{ range sort $afterMeishajian "Date" "desc" }}
                <div class="race-card" data-type="{{ if eq .Params.type "Marathon" }}marathon{{ else if eq .Params.type "Half Marathon" }}halfmarathon{{ else if or (eq .Params.type "Trail Running") (eq .Params.type "Trail Race") (eq .Params.type "Trail") }}trail{{ else if eq .Params.type "Hiking" }}hiking{{ else if eq .Params.type "Stair Climbing" }}stairs{{ else }}other{{ end }}">
                    <div class="race-card-content">
                        <div class="race-header">
                            <div>
                                <div class="race-title">{{ .Date.Format "2006" }} {{ .Title }}</div>
                                <div class="race-date">{{ .Date.Format "2006å¹´1æœˆ2æ—¥" }}</div>
                            </div>
                            <div>
                                {{ if eq .Params.status "DNF" }}
                                <div class="status-badge status-dnf">DNF</div>
                                {{ end }}
                            </div>
                        </div>
                        <div class="race-feeling">
                            {{ with .Content }}
                            <div class="race-feeling-content">{{ . | plainify | truncate 80 }}</div>
                            {{ end }}
                        </div>
                        <div class="race-info">
                            {{ if ne .Params.type "Stair Climbing" }}
                            <div class="race-info-item">
                                <div class="race-info-label">Distance</div>
                                <div class="race-info-value">{{ .Params.distance }}</div>
                            </div>
                            {{ end }}
                            <div class="race-info-item">
                                <div class="race-info-label">Location</div>
                                <div class="race-info-value">{{ .Params.location }}</div>
                            </div>
                            {{ if eq .Params.status "DNF" }}
                            {{ with .Params.dnf_location }}
                            <div class="race-info-item">
                                <div class="race-info-label">DNF Location</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ end }}
                            {{ if or (eq .Params.type "Marathon") (eq .Params.type "Half Marathon") }}
                            {{ with .Params.time }}
                            <div class="race-info-item">
                                <div class="race-info-label">Finish</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.pace }}
                            <div class="race-info-item">
                                <div class="race-info-label">Pace</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ else if or (eq .Params.type "Trail Running") (eq .Params.type "Trail Race") (eq .Params.type "Trail") (eq .Params.type "Hiking") }}
                            {{ with .Params.elevation }}
                            <div class="race-info-item">
                                <div class="race-info-label">Elevation Gain</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ else }}
                            {{ with .Params.climb }}
                            <div class="race-info-item">
                                <div class="race-info-label">Elevation Gain</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ end }}
                            {{ with .Params.time }}
                            <div class="race-info-item">
                                <div class="race-info-label">Finish Time</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ else if eq .Params.type "Stair Climbing" }}
                            {{ with .Params.elevation }}
                            <div class="race-info-item">
                                <div class="race-info-label">Height</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.floors }}
                            <div class="race-info-item">
                                <div class="race-info-label">Floors</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.time }}
                            <div class="race-info-item">
                                <div class="race-info-label">Finish Time</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ end }}
                            {{ with .Params.difficulty }}
                            <div class="race-info-item">
                                <div class="race-info-label">Difficulty</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.suitable_age }}
                            <div class="race-info-item">
                                <div class="race-info-label">Suitable Age</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.trail_features }}
                            <div class="race-info-item">
                                <div class="race-info-label">Features</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.best_season }}
                            <div class="race-info-item">
                                <div class="race-info-label">Best Season</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                        </div>
                    </div>
                    <div class="completed-time">
                        <div class="completed-time-value" data-date="{{ .Date.Format "2006-01-02" }}"></div>
                    </div>
                </div>
                {{ end }}
            {{ end }}
            

            

            
            <!-- æ˜¾ç¤º2025å¹´çš„æ´»åŠ¨ï¼ˆæŒ‰æ—¥æœŸé™åºæ’åºï¼‰ -->
            {{ $year2025 := where $allRaces "Date" "ge" (time "2025-01-01") }}
            {{ $year2025 := where $year2025 "Date" "lt" (time "2026-01-01") }}
            {{ if $year2025 }}
                {{ range sort $year2025 "Date" "desc" }}
                <div class="race-card" data-type="{{ if eq .Params.type "Marathon" }}marathon{{ else if eq .Params.type "Half Marathon" }}halfmarathon{{ else if or (eq .Params.type "Trail Running") (eq .Params.type "Trail Race") (eq .Params.type "Trail") }}trail{{ else if eq .Params.type "Hiking" }}hiking{{ else if eq .Params.type "Stair Climbing" }}stairs{{ else }}other{{ end }}">
                    <div class="race-card-content">
                        <div class="race-header">
                            <div>
                                <div class="race-title">{{ .Date.Format "2006" }} {{ .Title }}</div>
                                <div class="race-date">{{ .Date.Format "2006å¹´1æœˆ2æ—¥" }}</div>
                            </div>
                            <div>
                                {{ if eq .Params.status "DNF" }}
                                <div class="status-badge status-dnf">DNF</div>
                                {{ end }}
                            </div>
                        </div>
                        <div class="race-feeling">
                            {{ with .Content }}
                            <div class="race-feeling-content">{{ . | plainify | truncate 100 }}</div>
                            {{ end }}
                        </div>
                        <div class="race-info">
                            {{ if ne .Params.type "Stair Climbing" }}
                            <div class="race-info-item">
                                <div class="race-info-label">Distance</div>
                                <div class="race-info-value">{{ .Params.distance }}</div>
                            </div>
                            {{ end }}
                            <div class="race-info-item">
                                <div class="race-info-label">Location</div>
                                <div class="race-info-value">{{ .Params.location }}</div>
                            </div>
                            {{ if eq .Params.status "DNF" }}
                            {{ with .Params.dnf_location }}
                            <div class="race-info-item">
                                <div class="race-info-label">DNF Location</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ end }}
                            {{ if or (eq .Params.type "Marathon") (eq .Params.type "Half Marathon") }}
                            <div class="race-info-item">
                                <div class="race-info-label">Finish Time</div>
                                <div class="race-info-value">{{ with .Params.time }}{{ . }}{{ else }}N/A{{ end }}</div>
                            </div>
                            {{ with .Params.pace }}
                            <div class="race-info-item">
                                <div class="race-info-label">Pace</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ else if or (eq .Params.type "Trail Running") (eq .Params.type "Trail Race") (eq .Params.type "Trail") (eq .Params.type "Hiking") }}
                            {{ with .Params.elevation }}
                            <div class="race-info-item">
                                <div class="race-info-label">Elevation Gain</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ else }}
                            {{ with .Params.climb }}
                            <div class="race-info-item">
                                <div class="race-info-label">Elevation Gain</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ end }}
                            {{ with .Params.time }}
                            <div class="race-info-item">
                                <div class="race-info-label">Finish Time</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.difficulty }}
                            <div class="race-info-item">
                                <div class="race-info-label">Difficulty</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.suitable_age }}
                            <div class="race-info-item">
                                <div class="race-info-label">Suitable Age</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.trail_features }}
                            <div class="race-info-item">
                                <div class="race-info-label">Features</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.best_season }}
                            <div class="race-info-item">
                                <div class="race-info-label">Best Season</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ else if eq .Params.type "Stair Climbing" }}
                            {{ with .Params.elevation }}
                            <div class="race-info-item">
                                <div class="race-info-label">Height</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.floors }}
                            <div class="race-info-item">
                                <div class="race-info-label">Floors</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.time }}
                            <div class="race-info-item">
                                <div class="race-info-label">Finish Time</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ end }}
                        </div>
                    </div>
                    <div class="completed-time">
                        <div class="completed-time-value" data-date="{{ .Date.Format "2006-01-02" }}"></div>
                    </div>
                </div>
                {{ end }}
            {{ end }}
            

            

            

            
            <!-- æ˜¾ç¤º2024å¹´çš„å·²ç»“æŸæ´»åŠ¨ï¼ˆæŒ‰æ—¥æœŸé™åºæ’åºï¼‰ -->
            {{ $year2024 := where $allRaces "Date" "ge" (time "2024-01-01") }}
            {{ $year2024 := where $year2024 "Date" "lt" (time "2025-01-01") }}
            {{ if $year2024 }}
                {{ range sort $year2024 "Date" "desc" }}
                <div class="race-card" data-type="{{ if eq .Params.type "Marathon" }}marathon{{ else if eq .Params.type "Half Marathon" }}halfmarathon{{ else if or (eq .Params.type "Trail Running") (eq .Params.type "Trail Race") (eq .Params.type "Trail") }}trail{{ else if eq .Params.type "Hiking" }}hiking{{ else if eq .Params.type "Stair Climbing" }}stairs{{ else }}other{{ end }}">
                    <div class="race-card-content">
                        <div class="race-header">
                            <div>
                                <div class="race-title">{{ .Date.Format "2006" }} {{ .Title }}</div>
                                <div class="race-date">{{ .Date.Format "2006å¹´1æœˆ2æ—¥" }}</div>
                            </div>
                            <div>
                                {{ if eq .Params.status "DNF" }}
                                <div class="status-badge status-dnf">DNF</div>
                                {{ end }}
                            </div>
                        </div>
                        <div class="race-feeling">
                            {{ with .Content }}
                            <div class="race-feeling-content">{{ . | plainify | truncate 100 }}</div>
                            {{ end }}
                        </div>
                        <div class="race-info">
                            {{ if ne .Params.type "Stair Climbing" }}
                            <div class="race-info-item">
                                <div class="race-info-label">Distance</div>
                                <div class="race-info-value">{{ .Params.distance }}</div>
                            </div>
                            {{ end }}
                            <div class="race-info-item">
                                <div class="race-info-label">Location</div>
                                <div class="race-info-value">{{ .Params.location }}</div>
                            </div>
                            {{ if eq .Params.status "DNF" }}
                            {{ with .Params.dnf_location }}
                            <div class="race-info-item">
                                <div class="race-info-label">DNF Location</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ end }}
                            {{ if or (eq .Params.type "Marathon") (eq .Params.type "Half Marathon") }}
                            <div class="race-info-item">
                                <div class="race-info-label">Finish Time</div>
                                <div class="race-info-value">{{ with .Params.time }}{{ . }}{{ else }}N/A{{ end }}</div>
                            </div>
                            {{ with .Params.pace }}
                            <div class="race-info-item">
                                <div class="race-info-label">Pace</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ else if or (eq .Params.type "Trail Running") (eq .Params.type "Trail Race") (eq .Params.type "Trail") (eq .Params.type "Hiking") }}
                            {{ with .Params.elevation }}
                            <div class="race-info-item">
                                <div class="race-info-label">Elevation Gain</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ else }}
                            {{ with .Params.climb }}
                            <div class="race-info-item">
                                <div class="race-info-label">Elevation Gain</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ end }}
                            {{ with .Params.time }}
                            <div class="race-info-item">
                                <div class="race-info-label">Finish Time</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.difficulty }}
                            <div class="race-info-item">
                                <div class="race-info-label">Difficulty</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.suitable_age }}
                            <div class="race-info-item">
                                <div class="race-info-label">Suitable Age</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.trail_features }}
                            <div class="race-info-item">
                                <div class="race-info-label">Features</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.best_season }}
                            <div class="race-info-item">
                                <div class="race-info-label">Best Season</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ else if eq .Params.type "Stair Climbing" }}
                            {{ with .Params.elevation }}
                            <div class="race-info-item">
                                <div class="race-info-label">Height</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.floors }}
                            <div class="race-info-item">
                                <div class="race-info-label">Floors</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.time }}
                            <div class="race-info-item">
                                <div class="race-info-label">Finish Time</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ end }}
                        </div>
                    </div>
                    <div class="completed-time">
                        <div class="completed-time-value" data-date="{{ .Date.Format "2006-01-02" }}"></div>
                    </div>
                </div>
                {{ end }}
            {{ end }}

            
            <!-- æ˜¾ç¤º2023å¹´åŠä¹‹å‰çš„æ´»åŠ¨ï¼ˆæŒ‰æ—¥æœŸé™åºæ’åºï¼‰ -->
            {{ $yearBefore2024 := where $allRaces "Date" "lt" (time "2024-01-01") }}
            {{ if $yearBefore2024 }}
                {{ range sort $yearBefore2024 "Date" "desc" }}
                <div class="race-card" data-type="{{ if eq .Params.type "Marathon" }}marathon{{ else if eq .Params.type "Half Marathon" }}halfmarathon{{ else if or (eq .Params.type "Trail Running") (eq .Params.type "Trail Race") (eq .Params.type "Trail") }}trail{{ else if eq .Params.type "Hiking" }}hiking{{ else if eq .Params.type "Stair Climbing" }}stairs{{ else }}other{{ end }}">
                    <div class="race-card-content">
                        <div class="race-header">
                            <div>
                                <div class="race-title">{{ .Date.Format "2006" }} {{ .Title }}</div>
                                <div class="race-date">{{ .Date.Format "2006å¹´1æœˆ2æ—¥" }}</div>
                            </div>
                            <div>
                                {{ if eq .Params.status "DNF" }}
                                <div class="status-badge status-dnf">DNF</div>
                                {{ end }}
                            </div>
                        </div>
                        <div class="race-feeling">
                            {{ with .Content }}
                            <div class="race-feeling-content">{{ . | plainify | truncate 100 }}</div>
                            {{ end }}
                        </div>
                        <div class="race-info">
                            {{ if ne .Params.type "Stair Climbing" }}
                            <div class="race-info-item">
                                <div class="race-info-label">Distance</div>
                                <div class="race-info-value">{{ .Params.distance }}</div>
                            </div>
                            {{ end }}
                            <div class="race-info-item">
                                <div class="race-info-label">Location</div>
                                <div class="race-info-value">{{ .Params.location }}</div>
                            </div>
                            {{ if eq .Params.status "DNF" }}
                            {{ with .Params.dnf_location }}
                            <div class="race-info-item">
                                <div class="race-info-label">DNF Location</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ end }}
                            {{ if or (eq .Params.type "Marathon") (eq .Params.type "Half Marathon") }}
                            <div class="race-info-item">
                                <div class="race-info-label">Finish Time</div>
                                <div class="race-info-value">{{ with .Params.time }}{{ . }}{{ else }}N/A{{ end }}</div>
                            </div>
                            {{ with .Params.pace }}
                            <div class="race-info-item">
                                <div class="race-info-label">Pace</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ else if or (eq .Params.type "Trail Running") (eq .Params.type "Trail Race") (eq .Params.type "Trail") (eq .Params.type "Hiking") }}
                            {{ with .Params.elevation }}
                            <div class="race-info-item">
                                <div class="race-info-label">Elevation Gain</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ else }}
                            {{ with .Params.climb }}
                            <div class="race-info-item">
                                <div class="race-info-label">Elevation Gain</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ end }}
                            {{ with .Params.time }}
                            <div class="race-info-item">
                                <div class="race-info-label">Finish Time</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.difficulty }}
                            <div class="race-info-item">
                                <div class="race-info-label">Difficulty</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.suitable_age }}
                            <div class="race-info-item">
                                <div class="race-info-label">Suitable Age</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.trail_features }}
                            <div class="race-info-item">
                                <div class="race-info-label">Features</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.best_season }}
                            <div class="race-info-item">
                                <div class="race-info-label">Best Season</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ else if eq .Params.type "Stair Climbing" }}
                            {{ with .Params.elevation }}
                            <div class="race-info-item">
                                <div class="race-info-label">Height</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.floors }}
                            <div class="race-info-item">
                                <div class="race-info-label">Floors</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ with .Params.time }}
                            <div class="race-info-item">
                                <div class="race-info-label">Finish Time</div>
                                <div class="race-info-value">{{ . }}</div>
                            </div>
                            {{ end }}
                            {{ end }}
                        </div>
                    </div>
                    <div class="completed-time">
                        <div class="completed-time-value" data-date="{{ .Date.Format "2006-01-02" }}"></div>
                    </div>
                </div>
                {{ end }}
            {{ end }}
            </div>
        </div>
        
        <footer>
            <p>Â© 2026 Race Log. All rights reserved.</p>
        </footer>
    </div>
    
    <script>
        // æ¯”èµ›æ—¥æœŸå’Œæ—¶é—´ï¼ˆéƒ½æ˜¯å½“å¤©7:30ï¼‰
        const races = [
            {
                id: 'wuxi',
                date: new Date('2026-03-22T07:30:00')
            },
            {
                id: 'huaian',
                date: new Date('2026-04-12T07:30:00')
            },
            {
                id: 'yangchun',
                date: new Date('2026-04-26T07:30:00')
            }
        ];
        
        // æ›´æ–°å€’è®¡æ—¶
        function updateCountdowns() {
            const now = new Date();
            
            races.forEach(race => {
                const distance = race.date - now;
                
                if (distance <= 0) {
                    // æ¯”èµ›å·²å¼€å§‹
                    document.getElementById(race.id + '-countdown').textContent = 'æ¯”èµ›å·²å¼€å§‹ï¼';
                    return;
                }
                
                // è®¡ç®—å¤©ã€æ—¶ã€åˆ†ã€ç§’
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);
                
                // æ ¼å¼åŒ–æ˜¾ç¤ºï¼ˆè‹±æ–‡ï¼‰
                const formattedTime = `${days} days ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                document.getElementById(race.id + '-countdown').textContent = formattedTime;
            });
        }
        
        // ç«‹å³æ›´æ–°ä¸€æ¬¡
        updateCountdowns();
        
        // æ¯ç§’æ›´æ–°ä¸€æ¬¡
        setInterval(updateCountdowns, 1000);
        
        // åœ°å›¾åˆå§‹åŒ–å’Œæ ‡è®°ç‚¹æ˜¾ç¤º
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–åœ°å›¾');
            try {
                // æ£€æŸ¥åœ°å›¾å®¹å™¨æ˜¯å¦å­˜åœ¨
                const mapContainer = document.getElementById('map');
                console.log('åœ°å›¾å®¹å™¨:', mapContainer);
                if (!mapContainer) {
                    console.error('åœ°å›¾å®¹å™¨ä¸å­˜åœ¨ï¼');
                    return;
                }
                
                // æ£€æŸ¥Leafletåº“æ˜¯å¦åŠ è½½
                console.log('Leafletåº“:', L);
                if (typeof L === 'undefined') {
                    console.error('Leafletåº“æœªåŠ è½½ï¼');
                    return;
                }
                
                // åˆå§‹åŒ–åœ°å›¾
                console.log('å¼€å§‹åˆ›å»ºåœ°å›¾å¯¹è±¡');
                const map = L.map('map').setView([35.86166, 104.195397], 4); // ä¸­å›½ä¸­å¿ƒä½ç½®ï¼Œç¼©å°ä¸€çº§ä»¥æ˜¾ç¤ºå®Œæ•´ä¸­å›½åœ°å›¾
                console.log('åœ°å›¾å¯¹è±¡åˆ›å»ºæˆåŠŸ:', map);
                
                // æ·»åŠ æµ…è‰²åº•å›¾å›¾å±‚ï¼Œç±»ä¼¼äºå‚è€ƒå›¾ç‰‡æ•ˆæœ
                console.log('å¼€å§‹æ·»åŠ Tile Layer');
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(map);
                console.log('Tile Layer æ·»åŠ æˆåŠŸ');
                
                // ä»Hugoæ¨¡æ¿ç”Ÿæˆçš„æ´»åŠ¨æ•°æ®
                const raceLocations = [
                    {{ $completedRaces := where .Site.RegularPages "Params.status" "in" (slice "Completed" "DNF") }}
                    {{ range $index, $race := $completedRaces }}
                    { name: '{{ $race.Title }}', location: '{{ with $race.Params.location }}{{ . }}{{ end }}', lat: {{ with $race.Params.lat }}{{ . }}{{ else }}0{{ end }}, lng: {{ with $race.Params.lng }}{{ . }}{{ else }}0{{ end }}, type: '{{ with $race.Params.type }}{{ . }}{{ end }}', year: {{ $race.Date.Year }}, status: '{{ with $race.Params.status }}{{ . }}{{ else }}Completed{{ end }}' }{{ if not (eq (add $index 1) (len $completedRaces)) }},{{ end }}
                    {{ end }}
                ];
                
                console.log('æ´»åŠ¨åœ°ç‚¹æ•°æ®:', raceLocations);
                
                // æŒ‰çœä»½åˆ†ç»„æ´»åŠ¨ï¼Œç”¨äºæ˜¾ç¤ºçœä»½è“è‰²åŒºåŸŸï¼ˆåªç»Ÿè®¡å·²å®Œæˆçš„æ´»åŠ¨ï¼‰
                const provinces = {};
                raceLocations.forEach(race => {
                    // åªæ·»åŠ å·²å®Œæˆæˆ–DNFçš„æ´»åŠ¨
                    if (race.status !== 'Completed' && race.status !== 'DNF') {
                        return;
                    }
                    
                    // ä»locationä¸­æå–çœä»½ä¿¡æ¯
                    const locationParts = race.location.split(' ');
                    let provinceName;
                    if (locationParts.length >= 2) {
                        if (locationParts[1] === 'åŒ—äº¬' || locationParts[1] === 'ä¸Šæµ·' || locationParts[1] === 'å¤©æ´¥' || locationParts[1] === 'é‡åº†' || locationParts[1] === 'é¦™æ¸¯' || locationParts[1] === 'æ¾³é—¨') {
                            // ç›´è¾–å¸‚å’Œç‰¹åˆ«è¡Œæ”¿åŒº
                            provinceName = `${locationParts[0]} ${locationParts[1]}`;
                        } else if (locationParts.length >= 3) {
                            // å…¶ä»–çœä»½
                            provinceName = `${locationParts[0]} ${locationParts[1]}`;
                        } else {
                            provinceName = race.location;
                        }
                    } else {
                        provinceName = race.location;
                    }
                    
                    if (!provinces[provinceName]) {
                        provinces[provinceName] = {
                            name: provinceName,
                            races: []
                        };
                    }
                    provinces[provinceName].races.push(race);
                });
                
                console.log('æŒ‰çœä»½åˆ†ç»„åçš„æ•°æ®:', provinces);
                
                // æŒ‰åŸå¸‚åˆ†ç»„æ´»åŠ¨ï¼Œé¿å…é‡å¤æ ‡è®°
                const cities = {};
                raceLocations.forEach(race => {
                    const cityKey = `${race.location}-${race.lat}-${race.lng}`;
                    if (!cities[cityKey]) {
                        cities[cityKey] = {
                            name: race.location,
                            lat: race.lat,
                            lng: race.lng,
                            races: []
                        };
                    }
                    cities[cityKey].races.push(race);
                });
                
                console.log('æŒ‰åŸå¸‚åˆ†ç»„åçš„æ•°æ®:', cities);
                
                // å®šä¹‰è¾…åŠ©å‡½æ•°ï¼šä»åœ°ç‚¹å­—ç¬¦ä¸²ä¸­æå–çœä»½åç§°
                function getProvinceName(location) {
                    const locationParts = location.split(' ');
                    if (locationParts.length >= 2) {
                        if (locationParts[1] === 'åŒ—äº¬' || locationParts[1] === 'ä¸Šæµ·' || locationParts[1] === 'å¤©æ´¥' || locationParts[1] === 'é‡åº†' || locationParts[1] === 'é¦™æ¸¯' || locationParts[1] === 'æ¾³é—¨') {
                            // ç›´è¾–å¸‚å’Œç‰¹åˆ«è¡Œæ”¿åŒº
                            return `${locationParts[0]} ${locationParts[1]}`;
                        } else if (locationParts.length >= 3) {
                            // å…¶ä»–çœä»½
                            return `${locationParts[0]} ${locationParts[1]}`;
                        }
                    }
                    return location;
                }
                
                // çœä»½åç§°æ˜ å°„ï¼Œç¡®ä¿ä¸GeoJSONåŒ¹é…
                var provinceNameMap = {
                    'ä¸­å›½ é¦™æ¸¯': 'é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒº',
                    'ä¸­å›½ æ¾³é—¨': 'æ¾³é—¨ç‰¹åˆ«è¡Œæ”¿åŒº',
                    'ä¸­å›½ å¹¿ä¸œ': 'å¹¿ä¸œçœ',
                    'ä¸­å›½ æ±Ÿè‹': 'æ±Ÿè‹çœ',
                    'ä¸­å›½ æ²³åŒ—': 'æ²³åŒ—çœ',
                    'ä¸­å›½ ç”˜è‚ƒ': 'ç”˜è‚ƒçœ',
                    'ä¸­å›½ åŒ—äº¬': 'åŒ—äº¬å¸‚',
                    'ä¸­å›½ é‡åº†': 'é‡åº†å¸‚',
                    'ä¸­å›½ æµ™æ±Ÿ': 'æµ™æ±Ÿçœ',
                    'ä¸­å›½ ç¦å»º': 'ç¦å»ºçœ',
                    'ä¸­å›½ æ±Ÿè¥¿': 'æ±Ÿè¥¿çœ',
                    'ä¸­å›½ é™•è¥¿': 'é™•è¥¿çœ',
                    'ä¸­å›½ å››å·': 'å››å·çœ',
                    'ä¸­å›½ å±±è¥¿': 'å±±è¥¿çœ',
                    'ä¸­å›½ æ¹–å—': 'æ¹–å—çœ',
                    'ä¸­å›½ æ¹–åŒ—': 'æ¹–åŒ—çœ',
                    'ä¸­å›½ æµ·å—': 'æµ·å—çœ',
                    'ä¸­å›½ è´µå·': 'è´µå·çœ',
                    'ä¸­å›½ å¹¿è¥¿': 'å¹¿è¥¿å£®æ—è‡ªæ²»åŒº',
                    'ä¸­å›½ å°æ¹¾': 'å°æ¹¾çœ',
                    'ä¸­å›½ å†…è’™å¤': 'å†…è’™å¤è‡ªæ²»åŒº',
                    'ä¸­å›½ æ²³å—': 'æ²³å—çœ'
                };
                
                // ç›´æ¥å®šä¹‰æœ‰æ´»åŠ¨çš„çœä»½åˆ—è¡¨ï¼Œç¡®ä¿ä¸GeoJSONåŒ¹é…
                var activeProvinces = [
                    'é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒº',
                    'æ¾³é—¨ç‰¹åˆ«è¡Œæ”¿åŒº',
                    'å¹¿ä¸œçœ',
                    'æ±Ÿè‹çœ',
                    'æ²³åŒ—çœ',
                    'ç”˜è‚ƒçœ',
                    'åŒ—äº¬å¸‚',
                    'é‡åº†å¸‚',
                    'æµ™æ±Ÿçœ',
                    'ç¦å»ºçœ',
                    'æ±Ÿè¥¿çœ',
                    'é™•è¥¿çœ',
                    'å››å·çœ',
                    'å±±è¥¿çœ',
                    'æ¹–å—çœ',
                    'æ¹–åŒ—çœ',
                    'æµ·å—çœ',
                    'è´µå·çœ',
                    'å¹¿è¥¿å£®æ—è‡ªæ²»åŒº',
                    'å°æ¹¾çœ',
                    'å†…è’™å¤è‡ªæ²»åŒº',
                    'æ²³å—çœ'
                ];
                
                console.log('æœ‰æ´»åŠ¨çš„çœä»½:', activeProvinces);
                console.log('çœä»½é›†åˆå¤§å°:', activeProvinces.length);
                
                // å®šä¹‰ç®€åŒ–çš„ä¸­å›½åœ°å›¾GeoJSONæ•°æ®ç»“æ„
                var chinaMapGeoJSON = {
                    "type": "FeatureCollection",
                    "features": [
                        {
                            "type": "Feature",
                            "properties": {"name": "åŒ—äº¬å¸‚"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[115.4, 40.3], [117.6, 40.3], [117.6, 39.4], [115.4, 39.4], [115.4, 40.3]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "ä¸Šæµ·å¸‚"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[120.8, 31.8], [122.0, 31.8], [122.0, 30.9], [120.8, 30.9], [120.8, 31.8]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "å¹¿ä¸œçœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[109.7, 25.5], [117.7, 25.5], [117.7, 20.2], [109.7, 20.2], [109.7, 25.5]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "æ±Ÿè‹çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[116.3, 35.1], [121.0, 35.1], [121.0, 31.3], [116.3, 31.3], [116.3, 35.1]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "æ²³åŒ—çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[113.1, 42.7], [119.7, 42.7], [119.7, 36.0], [113.1, 36.0], [113.1, 42.7]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "ç”˜è‚ƒçœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[92.0, 42.7], [108.0, 42.7], [108.0, 32.0], [92.0, 32.0], [92.0, 42.7]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "é‡åº†å¸‚"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[105.5, 32.3], [109.7, 32.3], [109.7, 28.0], [105.5, 28.0], [105.5, 32.3]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "æµ™æ±Ÿçœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[118.0, 31.0], [123.0, 31.0], [123.0, 27.0], [118.0, 27.0], [118.0, 31.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "ç¦å»ºçœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[116.5, 28.3], [120.5, 28.3], [120.5, 23.3], [116.5, 23.3], [116.5, 28.3]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "æ±Ÿè¥¿çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[113.3, 30.0], [117.0, 30.0], [117.0, 24.0], [113.3, 24.0], [113.3, 30.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "é™•è¥¿çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[105.0, 39.5], [111.0, 39.5], [111.0, 32.0], [105.0, 32.0], [105.0, 39.5]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "å››å·çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[97.0, 34.5], [108.0, 34.5], [108.0, 26.0], [97.0, 26.0], [97.0, 34.5]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "å±±è¥¿çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[110.0, 40.5], [114.5, 40.5], [114.5, 35.0], [110.0, 35.0], [110.0, 40.5]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "æ¹–å—çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[108.0, 30.0], [114.0, 30.0], [114.0, 24.0], [108.0, 24.0], [108.0, 30.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "æ¹–åŒ—çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[108.0, 33.0], [113.0, 33.0], [113.0, 29.0], [108.0, 29.0], [108.0, 33.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "æµ·å—çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[108.0, 20.0], [112.0, 20.0], [112.0, 18.0], [108.0, 18.0], [108.0, 20.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "è´µå·çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[103.0, 29.0], [109.0, 29.0], [109.0, 24.0], [103.0, 24.0], [103.0, 29.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "å¹¿è¥¿å£®æ—è‡ªæ²»åŒº"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[104.0, 26.0], [112.0, 26.0], [112.0, 21.0], [104.0, 21.0], [104.0, 26.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "å°æ¹¾çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[119.0, 26.0], [122.0, 26.0], [122.0, 21.0], [119.0, 21.0], [119.0, 26.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "å†…è’™å¤è‡ªæ²»åŒº"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[97.0, 43.0], [126.0, 43.0], [126.0, 37.0], [97.0, 37.0], [97.0, 43.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "æ²³å—çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[110.0, 36.0], [116.0, 36.0], [116.0, 32.0], [110.0, 32.0], [110.0, 36.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒº"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[114.0, 22.5], [114.3, 22.5], [114.3, 22.2], [114.0, 22.2], [114.0, 22.5]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "æ¾³é—¨ç‰¹åˆ«è¡Œæ”¿åŒº"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[113.5, 22.3], [113.6, 22.3], [113.6, 22.1], [113.5, 22.1], [113.5, 22.3]]]
                            }
                        }
                    ]
                };
                
                // è°ƒæ•´åœ°å›¾è§†å›¾ï¼Œä½¿ç”¨æ›´åˆé€‚çš„ç¼©æ”¾çº§åˆ«
                map.setView([35.86166, 104.195397], 4.5); // è°ƒæ•´ç¼©æ”¾çº§åˆ«ï¼Œæ˜¾ç¤ºæ›´å®Œæ•´çš„ä¸­å›½åœ°å›¾
                console.log('åœ°å›¾è§†å›¾è°ƒæ•´å®Œæˆ');
                
                // åº•å›¾å·²ç»åœ¨åˆå§‹åŒ–æ—¶æ·»åŠ ï¼Œè¿™é‡Œä¸å†é‡å¤æ·»åŠ 
                
                // å®šä¹‰æ ‡å‡†çš„ä¸­å›½çœä»½è¾¹ç•ŒGeoJSONæ•°æ®
                var chinaProvincesGeoJSON = {
                    "type": "FeatureCollection",
                    "features": [
                        {
                            "type": "Feature",
                            "properties": {"name": "åŒ—äº¬å¸‚"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[115.4, 40.3], [116.8, 40.3], [116.8, 39.4], [115.4, 39.4], [115.4, 40.3]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "ä¸Šæµ·å¸‚"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[120.8, 31.8], [122.0, 31.8], [122.0, 30.9], [120.8, 30.9], [120.8, 31.8]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "å¹¿ä¸œçœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[109.7, 25.5], [117.7, 25.5], [117.7, 20.2], [109.7, 20.2], [109.7, 25.5]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "æ±Ÿè‹çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[116.3, 35.1], [121.0, 35.1], [121.0, 31.3], [116.3, 31.3], [116.3, 35.1]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "æ²³åŒ—çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[113.1, 42.7], [119.7, 42.7], [119.7, 36.0], [113.1, 36.0], [113.1, 42.7]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "ç”˜è‚ƒçœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[92.0, 42.7], [108.0, 42.7], [108.0, 32.0], [92.0, 32.0], [92.0, 42.7]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "é‡åº†å¸‚"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[105.5, 32.3], [109.7, 32.3], [109.7, 28.0], [105.5, 28.0], [105.5, 32.3]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "æµ™æ±Ÿçœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[118.0, 31.0], [123.0, 31.0], [123.0, 27.0], [118.0, 27.0], [118.0, 31.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "ç¦å»ºçœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[116.0, 28.0], [120.0, 28.0], [120.0, 23.5], [116.0, 23.5], [116.0, 28.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "æ±Ÿè¥¿çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[113.0, 30.0], [117.0, 30.0], [117.0, 24.0], [113.0, 24.0], [113.0, 30.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "é™•è¥¿çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[105.0, 39.5], [111.0, 39.5], [111.0, 32.0], [105.0, 32.0], [105.0, 39.5]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "å››å·çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[97.0, 34.5], [108.0, 34.5], [108.0, 26.0], [97.0, 26.0], [97.0, 34.5]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "å±±è¥¿çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[110.0, 40.5], [114.5, 40.5], [114.5, 35.0], [110.0, 35.0], [110.0, 40.5]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "æ¹–å—çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[108.0, 30.0], [114.0, 30.0], [114.0, 24.0], [108.0, 24.0], [108.0, 30.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "æ¹–åŒ—çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[108.0, 33.0], [113.0, 33.0], [113.0, 29.0], [108.0, 29.0], [108.0, 33.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "æµ·å—çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[108.0, 20.0], [112.0, 20.0], [112.0, 18.0], [108.0, 18.0], [108.0, 20.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "è´µå·çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[103.0, 29.0], [109.0, 29.0], [109.0, 24.0], [103.0, 24.0], [103.0, 29.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "å¹¿è¥¿å£®æ—è‡ªæ²»åŒº"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[104.0, 26.0], [112.0, 26.0], [112.0, 21.0], [104.0, 21.0], [104.0, 26.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "å°æ¹¾çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[119.0, 26.0], [122.0, 26.0], [122.0, 21.0], [119.0, 21.0], [119.0, 26.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "å†…è’™å¤è‡ªæ²»åŒº"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[97.0, 43.0], [126.0, 43.0], [126.0, 37.0], [97.0, 37.0], [97.0, 43.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "æ²³å—çœ"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[110.0, 36.0], [116.0, 36.0], [116.0, 32.0], [110.0, 32.0], [110.0, 36.0]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒº"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[114.0, 22.5], [114.3, 22.5], [114.3, 22.2], [114.0, 22.2], [114.0, 22.5]]]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {"name": "æ¾³é—¨ç‰¹åˆ«è¡Œæ”¿åŒº"},
                            "geometry": {
                                "type": "Polygon",
                                "coordinates": [[[113.5, 22.3], [113.6, 22.3], [113.6, 22.1], [113.5, 22.1], [113.5, 22.3]]]
                            }
                        }
                    ]
                };
                
                // ä½¿ç”¨å®Œæ•´çš„ä¸­å›½çœä»½GeoJSONæ•°æ®å®ç°çœŸå®çš„è¡Œæ”¿è¾¹ç•Œ
                console.log('ä½¿ç”¨å®Œæ•´çš„ä¸­å›½çœä»½GeoJSONæ•°æ®');
                
                // æ·»åŠ çœä»½è¾¹ç•ŒGeoJSONå›¾å±‚
                var provinceLayers = {};
                
                L.geoJSON(chinaProvincesGeoJSON, {
                    style: function(feature) {
                        var provinceName = feature.properties.name;
                        var isActive = activeProvinces.indexOf(provinceName) !== -1;
                        
                        return {
                            fillColor: isActive ? '#1e40af' : '#e5e7eb',
                            weight: isActive ? 2 : 1,
                            opacity: 0.8,
                            color: isActive ? '#1e3a8a' : '#9ca3af',
                            fillOpacity: isActive ? 0.4 : 0.15,
                            zIndex: isActive ? 1000 : 1
                        };
                    },
                    onEachFeature: function(feature, layer) {
                        var provinceName = feature.properties.name;
                        var isActive = activeProvinces.indexOf(provinceName) !== -1;
                        
                        // æ·»åŠ å¼¹çª—
                        if (isActive) {
                            // è·å–è¯¥çœä»½å¯¹åº”çš„æ´»åŠ¨
                            var provinceRaces = raceLocations.filter(function(race) {
                                var pName = getProvinceName(race.location);
                                return provinceNameMap[pName] === provinceName || pName === provinceName;
                            });
                            
                            if (provinceRaces.length > 0) {
                                var popupContent = '<div style="font-family: Arial, sans-serif;">';
                                popupContent += '<h3 style="margin: 0 0 8px 0; color: #1e3a8a;">' + provinceName + '</h3>';
                                popupContent += '<p><strong>æ´»åŠ¨æ•°é‡:</strong> ' + provinceRaces.length + '</p>';
                                popupContent += '<div style="max-height: 200px; overflow-y: auto;">';
                                
                                provinceRaces.forEach(function(race) {
                                    popupContent += '<div style="margin-bottom: 6px; padding-bottom: 4px; border-bottom: 1px solid #eee;">';
                                    popupContent += '<div style="font-weight: 500;">' + race.year + ' ' + race.name + '</div>';
                                    popupContent += '<div style="font-size: 12px; color: #666;">' + race.location + ' Â· ' + race.type + '</div>';
                                    popupContent += '</div>';
                                });
                                
                                popupContent += '</div></div>';
                                layer.bindPopup(popupContent);
                            }
                        }
                        
                        // å­˜å‚¨å›¾å±‚å¼•ç”¨
                        provinceLayers[provinceName] = layer;
                    }
                }).addTo(map);
                
                console.log('çœä»½è¾¹ç•ŒåŠ è½½å®Œæˆï¼Œå…±æ·»åŠ ', Object.keys(provinceLayers).length, 'ä¸ªçœä»½');
                
                // æ·»åŠ ç®€æ´çš„çº¢è‰²æ ‡è®°ç‚¹
                // åŸå¸‚ä¸­å¿ƒåæ ‡æ˜ å°„ï¼ˆç”¨äºæ²¡æœ‰ç²¾ç¡®åæ ‡çš„æ´»åŠ¨ï¼‰
                var cityCenterMap = {
                    'ä¸­å›½ é¦™æ¸¯': [22.319304, 114.169361],
                    'ä¸­å›½ æ¾³é—¨': [22.198745, 113.543873],
                    'ä¸­å›½ å¹¿ä¸œ': [23.129111, 113.264385],
                    'ä¸­å›½ æ±Ÿè‹': [32.060255, 118.796877],
                    'ä¸­å›½ æ²³åŒ—': [38.042768, 114.514859],
                    'ä¸­å›½ ç”˜è‚ƒ': [36.061099, 103.834347],
                    'ä¸­å›½ åŒ—äº¬': [39.904200, 116.407396],
                    'ä¸­å›½ é‡åº†': [29.431586, 106.912251],
                    'ä¸­å›½ æµ™æ±Ÿ': [30.274888, 120.155070],
                    'ä¸­å›½ ç¦å»º': [26.074508, 119.296494],
                    'ä¸­å›½ æ±Ÿè¥¿': [28.682892, 115.857942],
                    'ä¸­å›½ é™•è¥¿': [34.265779, 108.954239],
                    'ä¸­å›½ å››å·': [30.572815, 104.066801],
                    'ä¸­å›½ å±±è¥¿': [37.870590, 112.548879],
                    'ä¸­å›½ æ¹–å—': [28.228209, 112.938814],
                    'ä¸­å›½ æ¹–åŒ—': [30.592759, 114.305539],
                    'ä¸­å›½ æµ·å—': [20.017377, 110.349229],
                    'ä¸­å›½ è´µå·': [26.647003, 106.630225],
                    'ä¸­å›½ å¹¿è¥¿': [22.817002, 108.366543],
                    'ä¸­å›½ å°æ¹¾': [25.033963, 121.565472],
                    'ä¸­å›½ å†…è’™å¤': [40.818471, 111.670801],
                    'ä¸­å›½ æ²³å—': [34.765556, 113.753601]
                };
                
                Object.values(cities).forEach(city => {
                    // åˆ›å»ºçº¢è‰²æ ‡è®°ç‚¹ï¼Œç±»ä¼¼äºå‚è€ƒå›¾ç‰‡æ•ˆæœ
                    const customIcon = L.divIcon({
                        className: 'custom-marker',
                        html: `<div style="width: 8px; height: 8px; border-radius: 50%; background-color: red; border: 1px solid #fff; box-shadow: 0 0 1px rgba(0,0,0,0.5);"></div>`,
                        iconSize: [8, 8],
                        iconAnchor: [4, 4]
                    });
                    
                    // æ·»åŠ æ ‡è®°ç‚¹
                    console.log('æ·»åŠ åŸå¸‚æ ‡è®°ç‚¹:', city.name, city.lat, city.lng);
                    
                    // å¦‚æœæ²¡æœ‰ç²¾ç¡®åæ ‡ï¼Œä½¿ç”¨åŸå¸‚ä¸­å¿ƒåæ ‡
                    var markerLat = city.lat;
                    var markerLng = city.lng;
                    if (markerLat === 0 || markerLng === 0) {
                        var provinceName = getProvinceName(city.name);
                        if (cityCenterMap[provinceName]) {
                            markerLat = cityCenterMap[provinceName][0];
                            markerLng = cityCenterMap[provinceName][1];
                        }
                    }
                    
                    const marker = L.marker([markerLat, markerLng], { icon: customIcon }).addTo(map);
                    
                    // æ„å»ºå¼¹å‡ºä¿¡æ¯
                    let popupContent = `
                        <div style="font-family: 'SF Pro Display', 'Inter', sans-serif;">
                            <h3 style="margin: 0 0 8px 0; font-size: 16px; font-weight: 600; color: #1e3a8a;">${city.name}</h3>
                            <div style="margin-bottom: 8px;">
                                <strong>æ´»åŠ¨æ•°é‡:</strong> ${city.races.length}
                            </div>
                            <div style="max-height: 200px; overflow-y: auto;">
                    `;
                    
                    // æ·»åŠ åŸå¸‚çš„æ´»åŠ¨åˆ—è¡¨
                    city.races.forEach(race => {
                        popupContent += `
                            <div style="margin-bottom: 6px; padding-bottom: 4px; border-bottom: 1px solid #eee;">
                                <div style="font-size: 14px; font-weight: 500; color: #333;">${race.year} ${race.name}</div>
                                <div style="font-size: 12px; color: #666;">${race.type}</div>
                            </div>
                        `;
                    });
                    
                    popupContent += `
                            </div>
                        </div>
                    `;
                    
                    // æ·»åŠ å¼¹å‡ºä¿¡æ¯
                    marker.bindPopup(popupContent);
                });
                
                console.log('åœ°å›¾åˆå§‹åŒ–å®Œæˆ');
            } catch (error) {
                console.error('åœ°å›¾åˆå§‹åŒ–å¤±è´¥:', error);
            }
        });
        
        // ç­›é€‰åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            const typeFilterBtns = document.querySelectorAll('[data-filter]');
            const yearFilterBtns = document.querySelectorAll('[data-year]');
            const raceCards = document.querySelectorAll('.race-card');
            
            // å½“å‰ç­›é€‰çŠ¶æ€
            let currentType = 'all';
            let currentYear = 'all';
            
            // ç±»å‹ç­›é€‰æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            typeFilterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // ç§»é™¤æ‰€æœ‰ç±»å‹æŒ‰é’®çš„activeç±»
                    typeFilterBtns.forEach(b => b.classList.remove('active'));
                    // æ·»åŠ å½“å‰æŒ‰é’®çš„activeç±»
                    this.classList.add('active');
                    
                    currentType = this.getAttribute('data-filter');
                    applyFilters();
                });
            });
            
            // å¹´ä»½ç­›é€‰æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            yearFilterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // ç§»é™¤æ‰€æœ‰å¹´ä»½æŒ‰é’®çš„activeç±»
                    yearFilterBtns.forEach(b => b.classList.remove('active'));
                    // æ·»åŠ å½“å‰æŒ‰é’®çš„activeç±»
                    this.classList.add('active');
                    
                    currentYear = this.getAttribute('data-year');
                    applyFilters();
                });
            });
            
            // åº”ç”¨ç­›é€‰
            function applyFilters() {
                raceCards.forEach(card => {
                    const typeMatch = currentType === 'all' || card.getAttribute('data-type') === currentType;
                    
                    let yearMatch = true;
                    if (currentYear !== 'all') {
                        const dateElement = card.querySelector('.race-date');
                        if (dateElement) {
                            const dateText = dateElement.textContent;
                            const cardYear = dateText.match(/\d{4}/);
                            yearMatch = cardYear && cardYear[0] === currentYear;
                        } else {
                            yearMatch = false;
                        }
                    }
                    
                    if (typeMatch && yearMatch) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
                
                // æ›´æ–°ç»Ÿè®¡æ•°æ®
                updateStats();
            }
            
            // æ›´æ–°ç»Ÿè®¡æ•°æ®
            function updateStats() {
                // è·å–å½“å‰æ˜¾ç¤ºçš„å¡ç‰‡
                const visibleCards = Array.from(raceCards).filter(card => {
                    return card.style.display !== 'none';
                });
                
                // åˆå§‹åŒ–ç»Ÿè®¡æ•°æ®
                let stats = {
                    total: visibleCards.length,
                    marathon: 0,
                    halfmarathon: 0,
                    trail: 0,
                    hiking: 0,
                    elevation: 0,
                    '100km': 0,
                    dnf: 0,
                    'best-marathon': 'N/A',
                    'best-halfmarathon': 'N/A'
                };
                
                // åˆå§‹åŒ–æœ€å¥½æˆç»©
                let bestMarathonTime = null;
                let bestHalfMarathonTime = null;
                
                // è®¡ç®—ç»Ÿè®¡æ•°æ®
                visibleCards.forEach(card => {
                    const type = card.getAttribute('data-type');
                    
                    // ç±»å‹ç»Ÿè®¡
                    if (type === 'marathon') stats.marathon++;
                    if (type === 'halfmarathon') stats.halfmarathon++;
                    if (type === 'trail') stats.trail++;
                    if (type === 'hiking') stats.hiking++;
                    
                    // DNFç»Ÿè®¡
                    const dnfBadge = card.querySelector('.status-badge.status-dnf');
                    if (dnfBadge) {
                        stats.dnf++;
                    }
                    
                    // æµ·æ‹”ç»Ÿè®¡
                    const infoItems = card.querySelectorAll('.race-info-item');
                    infoItems.forEach(item => {
                        const label = item.querySelector('.race-info-label');
                        const value = item.querySelector('.race-info-value');
                        if (label && value) {
                            const labelText = label.textContent;
                            if (labelText === 'Elevation Gain' || labelText === 'Elevation') {
                                const elevationText = value.textContent;
                                const elevationMatch = elevationText.match(/\d+/);
                                if (elevationMatch) {
                                    stats.elevation += parseInt(elevationMatch[0]);
                                }
                            }
                            
                            // è·ç¦»ç»Ÿè®¡ï¼ˆç”¨äº100km+äº‹ä»¶ï¼‰
                            if (labelText === 'Distance') {
                                const distanceText = value.textContent;
                                const distanceMatch = distanceText.match(/\d+\.?\d*/);
                                if (distanceMatch) {
                                    const distance = parseFloat(distanceMatch[0]);
                                    if (distance >= 100) {
                                        stats['100km']++;
                                    }
                                }
                            }
                            
                            // æœ€å¥½æˆç»©ç»Ÿè®¡
                            if (labelText === 'Finish Time' || labelText === 'Finish') {
                                const timeText = value.textContent;
                                if (type === 'marathon' && timeText !== 'N/A') {
                                    const timeParts = timeText.split(':');
                                    if (timeParts.length === 3) {
                                        const totalSeconds = parseInt(timeParts[0]) * 3600 + parseInt(timeParts[1]) * 60 + parseInt(timeParts[2]);
                                        if (!bestMarathonTime || totalSeconds < bestMarathonTime) {
                                            bestMarathonTime = totalSeconds;
                                            stats['best-marathon'] = timeText;
                                        }
                                    }
                                }
                                if (type === 'halfmarathon' && timeText !== 'N/A') {
                                    const timeParts = timeText.split(':');
                                    if (timeParts.length === 3) {
                                        const totalSeconds = parseInt(timeParts[0]) * 3600 + parseInt(timeParts[1]) * 60 + parseInt(timeParts[2]);
                                        if (!bestHalfMarathonTime || totalSeconds < bestHalfMarathonTime) {
                                            bestHalfMarathonTime = totalSeconds;
                                            stats['best-halfmarathon'] = timeText;
                                        }
                                    }
                                }
                            }
                        }
                    });
                });
                
                // æ›´æ–°ç»Ÿè®¡æ˜¾ç¤º
                Object.keys(stats).forEach(statKey => {
                    const statElement = document.querySelector(`[data-stat="${statKey}"] .stat-value`);
                    if (statElement) {
                        if (statKey === 'elevation') {
                            statElement.textContent = stats[statKey] + '+';
                        } else {
                            statElement.textContent = stats[statKey];
                        }
                    }
                });
            }
            
            // è®¡ç®—å·²ç»“æŸæ—¶é—´
            function updateCompletedTimes() {
                const now = new Date();
                const completedElements = document.querySelectorAll('.completed-time-value');
                
                completedElements.forEach(element => {
                    const dateStr = element.getAttribute('data-date');
                    if (dateStr) {
                        const raceDate = new Date(dateStr + 'T00:00:00');
                        const timeDiff = now - raceDate;
                        
                        // è®¡ç®—å¤©æ•°
                        const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                        
                        // æ ¼å¼åŒ–æ˜¾ç¤ºï¼ˆè‹±æ–‡ï¼‰
                        const formattedTime = days + ' days ago';
                        element.textContent = formattedTime;
                    }
                });
            }
            
            // è®¡ç®—æ€»æµ·æ‹”çˆ¬å‡
            function calculateTotalElevation() {
                let totalElevation = 0;
                const raceCards = document.querySelectorAll('.race-card');
                
                // ä»æ‰€æœ‰å¡ç‰‡ä¸­æå–æµ·æ‹”æ•°æ®
                raceCards.forEach(card => {
                    const infoItems = card.querySelectorAll('.race-info-item');
                    infoItems.forEach(item => {
                        const label = item.querySelector('.race-info-label');
                        const value = item.querySelector('.race-info-value');
                        if (label && value) {
                            const labelText = label.textContent;
                            if (labelText === 'Elevation Gain' || labelText === 'Elevation') {
                                const elevationText = value.textContent;
                                const elevationMatch = elevationText.match(/\d+/);
                                if (elevationMatch) {
                                    totalElevation += parseInt(elevationMatch[0]);
                                }
                            }
                        }
                    });
                });
                
                // æ›´æ–°æ€»æµ·æ‹”çˆ¬å‡æ˜¾ç¤º
                const statLabels = document.querySelectorAll('.stat-label');
                statLabels.forEach(label => {
                    if (label.textContent === 'Elevation Gain') {
                        const elevationValue = label.previousElementSibling;
                        if (elevationValue) {
                            elevationValue.textContent = totalElevation + '+';
                        }
                    }
                });
            }
            
            // åˆå§‹åŒ–ç»Ÿè®¡æ•°æ®
            function initializeStats() {
                updateStats();
                console.log('å·²åˆå§‹åŒ–ç»Ÿè®¡æ•°æ®');
            }
            
            // æ‰§è¡Œè®¡ç®—
            calculateTotalElevation();
            initializeStats();
            
            // ç¡®ä¿DOMå®Œå…¨åŠ è½½åå†è®¡ç®—å·²ç»“æŸæ—¶é—´
            setTimeout(function() {
                updateCompletedTimes();
                console.log('å·²æ›´æ–°å·²ç»“æŸæ—¶é—´');
            }, 100);
            
            // æ¯å¤©æ›´æ–°å·²ç»“æŸæ—¶é—´ï¼ˆ24å°æ—¶ï¼‰
            setInterval(updateCompletedTimes, 24 * 60 * 60 * 1000);
        });
    </script>
</body>
</html>